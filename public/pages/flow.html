<div class="design2 designer-container" flex layout-fill layout="column">
  <div class="logo-toolbar"> <!-- Defined first so its on the bottom layer -->
    <img src="/assets/images/octoblu.png" height="50px"/>
  </div>

  <md-toolbar md-theme="octo-blue" class="flow-top-bar" layout="row" layout-phone="column" layout-tablet="column">
    <div flex layout="row" class="md-toolbar-tools">
      <h2 class="page-heading">
        <a href class="menu-icon" ng-click="toggleNav()">
          <i class="fa fa-bars"></i>
        </a>
      </h2>

      <flow-editor-omnibox flex omni-search="omniSearch" flow-nodes="activeFlow.nodes" selected-flow-node="activeFlow.selectedFlowNode" ></flow-editor-omnibox>
    </div>

    <div flex layout="row" class="md-toolbar-tools" layout-align="end">
      <div class="input-group flow-name dropdown" dropdown>
        <input type="text" class="form-control" placeholder="Flow Name" ng-model="activeFlow.name" style="border-right: 0px;">
        <span class="input-group-btn flow-dropdown" id="flowMenuDropdown" data-toggle="dropdown" style="border-left: 0px;">
          <button class="btn btn-white dropdown-toggle" dropdown-toggle>
            <i class="fa fa-lg fa-angle-down input-addon"></i>
          </button>
        </span>
        <ul class="dropdown-menu" role="menu" aria-labelledby="flowMenuDropdown" style="max-height: {{flowSelectorHeight}}px;">
          <li class="text-center" data-toggle="dropdown" ng-click="addFlow()"><a class="fa fa-plus" href></a></li>
          <li role="presentation"  class="divider"></li>
          <li class="flow-item" data-toggle="dropdown" ng-repeat="flow in flows | orderBy: 'name'" >
            <a ui-sref="material.flow({flowId: flow.flowId})"><i class="fa fa-fw fa-power-off" ng-class="{'online' : flow.online}"></i> {{flow.name}}</a>
          </li>
        </ul>
      </div>
    </div>

    <div flex="0" flex-phone="95" flex-tablet="95" layout="row" layout-align="end" class="flow-controls md-toolbar-tools" style="min-height: 50px;">
      <div flex layout="row" layout-align="center">
        <md-button ng-click="deleteFlow(activeFlow)">
          <md-tooltip>Delete Flow</md-tooltip>
          <i class="fa fa-lg fa-trash"></i>
        </md-button>

        <md-button ng-click="createTemplate(activeFlow)">
          <md-tooltip>Create a Template</md-tooltip>
          <i class="fa fa-lg fa-share-alt"></i>
        </md-button>
      </div>

      <div flex layout="row" layout-align="center">

        <md-button ng-click="center()">
          <md-tooltip>Center</md-tooltip>
          <i class="fa fa-crosshairs"></i>
        </md-button>

        <md-button ng-click="zoomOut()" w-mousetrap="{'-' : zoomOut, '_' : zoomOut}">
          <md-tooltip>Zoom Out</md-tooltip>
          <i class="fa fa-minus"></i>
        </md-button>

        <md-button ng-click="zoomIn()" w-mousetrap="{'+' : zoomIn, '=' : zoomIn}">
          <md-tooltip>Zoom In</md-tooltip>
          <i class="fa fa-plus"></i>
        </md-button>
      </div>

      <div flex layout="row" layout-align="center">
        <md-button ng-click="stop()" class="stop-button" ng-class="{ 'btn-stopped': deviceOnline === false, stopping: stopping }">
          <md-tooltip>Stop</md-tooltip>
          <i class="fa fa-stop"></i>
        </md-button>

        <md-button ng-click="start()" class="start-button" ng-class="{ 'btn-playing': deviceOnline, deploying: deploying }">
          <md-tooltip>Start</md-tooltip>
          <i class="fa fa-play"></i>
        </md-button>
      </div>
    </div>
  </md-toolbar>

  <div style="z-index: 0;" class="workspace-container" flex layout-fill layout="column" w-mousetrap="{'mod+c':copySelection, 'mod+x': cutSelection, 'mod+v':pasteSelection, 'backspace': deleteSelection, 'del': deleteSelection, 'mod+z':undoEdit, 'mod+y':redoEdit}" ng-mousemove="setMousePosition($event)" ng-mouseout="clearMousePosition()">
    <flow-editor flow="activeFlow"></flow-editor>
  </div>

  <div class="zoom-controls" ng-class="{'browser-maximized' : activeFlow.browserMaximized}"></div>
  <flow-browser flex debug-lines="debugLines" node-types="nodeTypes" flow-node-types="flowNodeTypes" active-flow="activeFlow"></flow-browser>
  <flow-node-editor flow-node="activeFlow.selectedFlowNode"></flow-node-editor>
  <flow-node-setup  node-type="activeFlow.selectedFlowNode"></flow-node-setup>
</div>
